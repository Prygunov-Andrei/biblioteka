# üì° API Endpoints - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ë–∞–∑–æ–≤—ã–π URL
```
http://localhost:8000/api/
```

---

## 1. Categories (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)

### –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
```
GET /api/categories/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∫–æ–¥—É

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
[
  {
    "id": 1,
    "code": "t2mv",
    "name": "2-—è –ú–∏—Ä–æ–≤–∞—è –≤–æ–π–Ω–∞",
    "slug": "2-ya-mirovaya-voyna",
    "icon": "üìö",
    "order": 1,
    "books_count": 5
  }
]
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```
POST /api/categories/
```
**Body:**
```json
{
  "code": "test",
  "name": "Test Category",
  "slug": "test-category",
  "icon": "üìö",
  "order": 0
}
```

### –î–µ—Ç–∞–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```
GET /api/categories/{slug}/
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```
PUT /api/categories/{slug}/
PATCH /api/categories/{slug}/
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```
DELETE /api/categories/{slug}/
```

### –î–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (—Å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏)
```
GET /api/categories/tree/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `libraries` - —Å–ø–∏—Å–æ–∫ ID –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–¥—Å—á–µ—Ç–∞ –∫–Ω–∏–≥ (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑: `?libraries=1&libraries=2`)
  - **–í–ê–ñ–ù–û:** –ï—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  - –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, `books_count` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–Ω–∏–≥–∏ –∏–∑ —ç—Ç–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
  - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –Ω—É–ª–µ–≤—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–Ω–∏–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ –æ—Ç–≤–µ—Ç–∞

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
[
  {
    "id": 1,
    "code": "aziya",
    "name": "–ê–∑–∏—è",
    "slug": "aziya",
    "icon": "üìö",
    "order": 1,
    "books_count": 42,
    "subcategories": [
      {
        "id": 2,
        "code": "tind",
        "name": "–ò–Ω–¥–∏—è, –ü–∞–∫–∏—Å—Ç–∞–Ω, –¢–∏–±–µ—Ç, –¶–µ–π–ª–æ–Ω (–®—Ä–∏-–õ–∞–Ω–∫–∞)",
        "slug": "indiya-pakistan-tibet",
        "icon": "üìö",
        "order": 6,
        "books_count": 6
      }
    ]
  }
]
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Endpoint –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–¥—Å—á–µ—Ç–∞ –∫–Ω–∏–≥. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–∏–Ω SQL –∑–∞–ø—Ä–æ—Å —Å `annotate` –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

---

## 2. Authors (–ê–≤—Ç–æ—Ä—ã)

### –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤
```
GET /api/authors/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` - –ø–æ–∏—Å–∫ –ø–æ –§–ò–û
- `birth_year_min` - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≥–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è
- `birth_year_max` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≥–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `full_name`)

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
[
  {
    "id": 1,
    "full_name": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
    "birth_year": 1950,
    "death_year": 2020,
    "biography": "...",
    "notes": "..."
  }
]
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
```
POST /api/authors/
```
**Body:**
```json
{
  "full_name": "–ü–µ—Ç—Ä–æ–≤ –ü.–ü.",
  "birth_year": 1960,
  "death_year": null,
  "biography": "–ë–∏–æ–≥—Ä–∞—Ñ–∏—è –∞–≤—Ç–æ—Ä–∞",
  "notes": "–ó–∞–º–µ—Ç–∫–∏"
}
```

### –î–µ—Ç–∞–ª–∏ –∞–≤—Ç–æ—Ä–∞
```
GET /api/authors/{id}/
```

### –ö–Ω–∏–≥–∏ –∞–≤—Ç–æ—Ä–∞
```
GET /api/authors/{id}/books/
```
**–û—Ç–≤–µ—Ç:** –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥ –∞–≤—Ç–æ—Ä–∞

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
```
PUT /api/authors/{id}/
PATCH /api/authors/{id}/
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
```
DELETE /api/authors/{id}/
```

---

## 3. Publishers (–ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞)

### –°–ø–∏—Å–æ–∫ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤
```
GET /api/publishers/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –≥–æ—Ä–æ–¥—É
- `city` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –≥–æ—Ä–æ–¥—É
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `name`)

### –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
```
POST /api/publishers/
```
**Body:**
```json
{
  "name": "–•—É–¥. –ª–∏—Ç-—Ä–∞",
  "city": "–ú–æ—Å–∫–≤–∞",
  "website": "https://example.com",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ"
}
```

### –î–µ—Ç–∞–ª–∏ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
```
GET /api/publishers/{id}/
```

### –ö–Ω–∏–≥–∏ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
```
GET /api/publishers/{id}/books/
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
```
PUT /api/publishers/{id}/
PATCH /api/publishers/{id}/
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
```
DELETE /api/publishers/{id}/
```

---

## 4. Books (–ö–Ω–∏–≥–∏)

### –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥
```
GET /api/books/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `category` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (slug –∏–ª–∏ ID)
- `author` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∞–≤—Ç–æ—Ä—É (ID –∏–ª–∏ –∏–º—è)
- `publisher` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É (ID –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ)
- `libraries` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º (—Å–ø–∏—Å–æ–∫ ID, –Ω–∞–ø—Ä–∏–º–µ—Ä: `?libraries=1&libraries=2`)
- `year_min` - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≥–æ–¥ –∏–∑–¥–∞–Ω–∏—è
- `year_max` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≥–æ–¥ –∏–∑–¥–∞–Ω–∏—è
- `binding_type` - —Ç–∏–ø –ø–µ—Ä–µ–ø–ª–µ—Ç–∞
- `format` - —Ñ–æ—Ä–º–∞—Ç –∫–Ω–∏–≥–∏
- `condition` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–∏–≥–∏
- `price_min` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- `price_max` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- `search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫—É, ISBN, –∞–≤—Ç–æ—Ä—É (–Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É)
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `-created_at`)
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ—Å–ª–∏ –∫–Ω–∏–≥ > 30)

**–ü–∞–≥–∏–Ω–∞—Ü–∏—è:**
- –ï—Å–ª–∏ –∫–Ω–∏–≥ ‚â§ 30: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫, `paginated: false`
- –ï—Å–ª–∏ –∫–Ω–∏–≥ > 30: –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è –ø–æ 30 –∫–Ω–∏–≥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, `paginated: true`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `page` –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

**–ü—Ä–∏–º–µ—Ä—ã:**
```
GET /api/books/?category=test&year_min=2020&year_max=2023
GET /api/books/?author=1&binding_type=hard
GET /api/books/?search=–≤–æ–π–Ω–∞&ordering=title
GET /api/books/?libraries=1&libraries=2  # –ö–Ω–∏–≥–∏ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫ —Å ID 1 –∏ 2
GET /api/books/?page=2  # –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–µ—Å–ª–∏ –∫–Ω–∏–≥ > 30)
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π:**

–ï—Å–ª–∏ –∫–Ω–∏–≥ ‚â§ 30:
```json
{
  "count": 25,
  "results": [...],
  "paginated": false
}
```

–ï—Å–ª–∏ –∫–Ω–∏–≥ > 30:
```json
{
  "count": 684,
  "next": "http://localhost:8000/api/books/?page=2",
  "previous": null,
  "results": [...],
  "paginated": true
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
```
POST /api/books/
```
**–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –î–∞ (IsAuthenticated)

**Body (JSON):**
```json
{
  "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏",
  "subtitle": "–í—Ç–æ—Ä–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
  "category": 1,
  "author_ids": [1, 2],
  "publication_place": "–ú–æ—Å–∫–≤–∞",
  "publisher": 1,
  "year": 2023,
  "year_approx": "",
  "pages_info": "300 —Å—Ç—Ä., –∏–ª.",
  "circulation": 5000,
  "language": 1,
  "language_name": "–†—É—Å—Å–∫–∏–π",
  "binding_type": "hard",
  "binding_details": "–¢–≤–µ—Ä–¥—ã–π –ø–µ—Ä–µ–ø–ª–µ—Ç, –∫—Ä–∞—Å–Ω—ã–π",
  "format": "regular",
  "price_rub": "1500.00",
  "description": "–ê–Ω–Ω–æ—Ç–∞—Ü–∏—è",
  "condition": "excellent",
  "condition_details": "",
  "seller_code": "A-1-23",
  "isbn": "978-5-123456-78-9",
  "library": 1,
  "status": "none",
  "normalized_image_urls": [
    "/media/temp/normalized/normalized_uuid1.jpg",
    "/media/temp/normalized/normalized_uuid2.jpg"
  ]
}
```

**–ù–æ–≤—ã–µ –ø–æ–ª—è:**
- `circulation` (Integer, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –¢–∏—Ä–∞–∂ –∫–Ω–∏–≥–∏ –≤ —à—Ç—É–∫–∞—Ö
- `language` (Integer, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - ID —è–∑—ã–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∫–Ω–∏–≥–∏
- `language_name` (String, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –ù–∞–∑–≤–∞–Ω–∏–µ —è–∑—ã–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–†—É—Å—Å–∫–∏–π"). –ï—Å–ª–∏ —è–∑—ã–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω, –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π
- `library` (Integer, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - ID –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `status` (String, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –°—Ç–∞—Ç—É—Å –∫–Ω–∏–≥–∏ (none, reading, read, want_to_read, want_to_reread). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: "none"
- `normalized_image_urls` (Array[String], –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –°–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π –∫ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –§–∞–π–ª—ã –±—É–¥—É—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ —Å–æ–∑–¥–∞–Ω—ã BookPage –∑–∞–ø–∏—Å–∏

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** 
- `author_ids` - —Å–ø–∏—Å–æ–∫ ID –∞–≤—Ç–æ—Ä–æ–≤ (–¥–æ 3-—Ö)
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–Ω–∏–≥–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –∏–∑ `media/temp/normalized/` –≤ `media/books/pages/processed/` –∏ —Å–æ–∑–¥–∞—é—Ç—Å—è BookPage –∑–∞–ø–∏—Å–∏
- –ï—Å–ª–∏ `library` –Ω–µ —É–∫–∞–∑–∞–Ω, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
```
GET /api/books/stats/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `libraries` - —Å–ø–∏—Å–æ–∫ ID –±–∏–±–ª–∏–æ—Ç–µ–∫ (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑: `?libraries=1&libraries=2`)
- `category` - ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
- `hashtag` - ID —Ö—ç—à—Ç–µ–≥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ö—ç—à—Ç–µ–≥—É)
- `search` - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø–æ–∏—Å–∫—É)

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
{
  "status": {
    "none": 50,
    "reading": 28,
    "read": 66,
    "want_to_read": 49,
    "want_to_reread": 65
  },
  "with_reviews": 93,
  "with_electronic": 0,
  "recently_added": 258
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –≤—Å–µ—Ö –∫–Ω–∏–≥ –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö (–Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö.

**–ü—Ä–∏–º–µ—Ä—ã:**
```
GET /api/books/stats/?libraries=1&libraries=2
GET /api/books/stats/?libraries=1&category=5
GET /api/books/stats/?libraries=1&hashtag=3&search=–≤–æ–π–Ω–∞
```

---

### –î–µ—Ç–∞–ª–∏ –∫–Ω–∏–≥–∏
```
GET /api/books/{id}/
```
**–û—Ç–≤–µ—Ç:** –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–∫–ª—é—á–∞—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏, —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –¥–∞—Ç—ã –ø—Ä–æ—á—Ç–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "id": 1,
  "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏",
  "circulation": 5000,
  "language": 1,
  "language_name": "–†—É—Å—Å–∫–∏–π",
  "reading_dates": [
    {
      "id": 1,
      "date": "2024-01-15",
      "notes": "–ü—Ä–æ—á–∏—Ç–∞–ª –∑–∞ –æ–¥–∏–Ω –≤–µ—á–µ—Ä"
    }
  ],
  ...
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏
```
PUT /api/books/{id}/
PATCH /api/books/{id}/
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏
```
DELETE /api/books/{id}/
```

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–∏–≥–∏
```
GET /api/books/{id}/images/           # –°–ø–∏—Å–æ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
POST /api/books/{id}/images/          # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```
**POST Body (multipart/form-data):**
- `image` - —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `order` - –ø–æ—Ä—è–¥–æ–∫ (1-20)

### –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∫–Ω–∏–≥–∏
```
GET /api/books/{id}/electronic_versions/     # –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Å–∏–π
POST /api/books/{id}/electronic_versions/    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
```
**POST Body (JSON –∏–ª–∏ multipart):**
```json
{
  "format": "pdf",
  "url": "https://example.com/book.pdf"
}
```
–∏–ª–∏
```
format: pdf
file: <—Ñ–∞–π–ª>
```

### –°—Ç—Ä–∞–Ω–∏—Ü—ã –∫–Ω–∏–≥–∏
```
GET /api/books/{id}/pages/            # –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ (pending, processing, completed, failed)

### –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
```
POST /api/books/{id}/upload_pages/
```
**Body (multipart/form-data):**
- `pages` - –º–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–û—Ç–≤–µ—Ç:** `201 Created`
```json
{
  "message": "–ó–∞–≥—Ä—É–∂–µ–Ω–æ 3 —Å—Ç—Ä–∞–Ω–∏—Ü",
  "pages": [
    {
      "id": 1,
      "page_number": 1,
      "original_url": "/media/books/pages/original/page1.jpg",
      "processed_url": null,
      "processing_status": "pending"
    }
  ]
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```
DELETE /api/books/{id}/pages/{page_id}/
```
**–û—Ç–≤–µ—Ç:** `204 No Content`

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
```
POST /api/books/{id}/process_pages/
```
**Body (JSON):**
```json
{
  "page_ids": [1, 2, 3]  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ
}
```

### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü (–¥–ª—è –º–∞—Å—Ç–µ—Ä–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–∏–≥–∏)
```
POST /api/books/normalize-pages/
```
**–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –î–∞ (IsAuthenticated)

**Body (multipart/form-data):**
- `files` - –º–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑)

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
{
  "normalized_images": [
    {
      "id": "temp_uuid",
      "original_filename": "page1.jpg",
      "normalized_url": "/media/temp/normalized/normalized_uuid.jpg",
      "width": 1920,
      "height": 2560
    }
  ],
  "total": 3,
  "processed": 3,
  "errors": []
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `media/temp/normalized/` –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–Ω–∏–≥–∏.

### –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥–∏ —á–µ—Ä–µ–∑ LLM
```
POST /api/books/auto-fill/
```
**–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –î–∞ (IsAuthenticated)

**Body (JSON):**
```json
{
  "normalized_image_urls": [
    "/media/temp/normalized/normalized_uuid1.jpg",
    "/media/temp/normalized/normalized_uuid2.jpg"
  ]
}
```

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
{
  "success": true,
  "data": {
    "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏",
    "subtitle": "–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫",
    "category_id": 160,
    "authors": ["–ê–≤—Ç–æ—Ä 1", "–ê–≤—Ç–æ—Ä 2"],
    "publisher_name": "–ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞",
    "publication_place": "–ú–æ—Å–∫–≤–∞",
    "year": 2023,
    "year_approx": null,
    "pages_info": "300 —Å—Ç—Ä., –∏–ª.",
    "circulation": 5000,
    "language_name": "–†—É—Å—Å–∫–∏–π",
    "binding_type": "hard",
    "binding_details": "–¢–≤–µ—Ä–¥—ã–π –ø–µ—Ä–µ–ø–ª–µ—Ç",
    "format": "regular",
    "condition": "excellent",
    "condition_details": null,
    "isbn": "978-5-123456-78-9",
    "description": "–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–Ω–∏–≥–∏..."
  },
  "confidence": 0.85,
  "error": null
}
```

**–û—à–∏–±–∫–∏:**
- `403 Forbidden` - OpenAI API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ä–µ–≥–∏–æ–Ω–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è VPN)
- `400 Bad Request` - –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞
- `500 Internal Server Error` - –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç OpenAI GPT-4o –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å—Ç—Ä–∞–Ω–∏—Ü –∫–Ω–∏–≥–∏ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

---

## 5. Book Images (–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–∏–≥)

### –°–ø–∏—Å–æ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```
GET /api/book-images/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `book` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–Ω–∏–≥–µ (ID)

### –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```
POST /api/book-images/
```
**Body (multipart/form-data):**
- `book` - ID –∫–Ω–∏–≥–∏
- `image` - —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `order` - –ø–æ—Ä—è–¥–æ–∫ (1-20)

### –î–µ—Ç–∞–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```
GET /api/book-images/{id}/
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```
PUT /api/book-images/{id}/
PATCH /api/book-images/{id}/
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```
DELETE /api/book-images/{id}/
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ BookViewSet
```
DELETE /api/books/{id}/images/{image_id}/
```
**–û—Ç–≤–µ—Ç:** `204 No Content`

---

## 6. Book Electronic (–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏)

### –°–ø–∏—Å–æ–∫ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π
```
GET /api/book-electronic/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `book` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–Ω–∏–≥–µ (ID)
- `format` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ñ–æ—Ä–º–∞—Ç—É (pdf, epub, mobi, fb2, djvu, txt, rtf, doc, docx)

### –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
```
POST /api/book-electronic/
```
**Body (JSON –∏–ª–∏ multipart):**
```json
{
  "book": 1,
  "format": "pdf",
  "url": "https://example.com/book.pdf",
  "file": null  // –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
}
```

### –î–µ—Ç–∞–ª–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
```
GET /api/book-electronic/{id}/
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
```
PUT /api/book-electronic/{id}/
PATCH /api/book-electronic/{id}/
```

### –£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
```
DELETE /api/book-electronic/{id}/
```

### –£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —á–µ—Ä–µ–∑ BookViewSet
```
DELETE /api/books/{id}/electronic_versions/{version_id}/
```
**–û—Ç–≤–µ—Ç:** `204 No Content`

---

## 7. Book Pages (–°—Ç—Ä–∞–Ω–∏—Ü—ã –∫–Ω–∏–≥)

### –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü
```
GET /api/book-pages/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `book` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–Ω–∏–≥–µ (ID)
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```
POST /api/book-pages/
```
**Body (multipart/form-data):**
- `book` - ID –∫–Ω–∏–≥–∏
- `page_number` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `original_image` - —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –î–µ—Ç–∞–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```
GET /api/book-pages/{id}/
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```
PUT /api/book-pages/{id}/
PATCH /api/book-pages/{id}/
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```
DELETE /api/book-pages/{id}/
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```
POST /api/book-pages/{id}/process/
```
**–û—Ç–≤–µ—Ç:** –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å processed_image

---

## –°—Ç–∞—Ç—É—Å—ã –æ—Ç–≤–µ—Ç–æ–≤

- `200 OK` - –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `201 Created` - –û–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω
- `400 Bad Request` - –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `404 Not Found` - –û–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500 Internal Server Error` - –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ —Å –∞–≤—Ç–æ—Ä–∞–º–∏
```bash
curl -X POST http://localhost:8000/api/books/ \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–í–æ–π–Ω–∞ –∏ –º–∏—Ä",
    "category": 1,
    "author_ids": [1, 2],
    "year": 1869,
    "publisher": 1
  }'
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```bash
curl -X POST http://localhost:8000/api/books/1/images/ \
  -F "image=@cover.jpg" \
  -F "order=1"
```

### –ü–æ–∏—Å–∫ –∫–Ω–∏–≥ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç
```bash
curl "http://localhost:8000/api/books/?year_min=2020&year_max=2023"
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
```bash
curl -X POST http://localhost:8000/api/books/1/process_pages/ \
  -H "Content-Type: application/json" \
  -d '{"page_ids": [1, 2, 3]}'
```

---

---

## 10. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT)

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
```
POST /api/token/
```
**Body:**
```json
{
  "username": "user",
  "password": "password"
}
```

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
{
  "access": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "refresh": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
```
POST /api/token/refresh/
```
**Body:**
```json
{
  "refresh": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}
```

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
{
  "access": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
–î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –∑–∞–ø—Ä–æ—Å—ã:
```
Authorization: Bearer {access_token}
```

---

## 11. User Profiles (–ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

### –°–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
```
GET /api/user-profiles/me/
PUT /api/user-profiles/me/
PATCH /api/user-profiles/me/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–û—Ç–≤–µ—Ç (GET):** `200 OK`
```json
{
  "id": 1,
  "user": {
    "id": 1,
    "username": "user",
    "email": "user@example.com",
    "first_name": "",
    "last_name": ""
  },
  "full_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "photo": null,
  "photo_url": null,
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è",
  "libraries_count": 2,
  "books_count": 15,
  "created_at": "2025-11-03T12:00:00Z",
  "updated_at": "2025-11-03T12:00:00Z"
}
```

**Body (PUT/PATCH):**
```json
{
  "full_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "description": "–ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
  "photo": "<file>"
}
```

### –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–∏–ª–µ–π
```
GET /api/user-profiles/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `user` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –î–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ñ–∏–ª—è
```
GET /api/user-profiles/{id}/
PUT /api/user-profiles/{id}/
PATCH /api/user-profiles/{id}/
DELETE /api/user-profiles/{id}/
```

---

## 12. Libraries (–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏)

### –°–ø–∏—Å–æ–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫
```
GET /api/libraries/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `owner` - ID –∏–ª–∏ username –≤–ª–∞–¥–µ–ª—å—Ü–∞

**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
[
  {
    "id": 1,
    "owner": 1,
    "owner_username": "user",
    "name": "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≤ –ú–æ—Å–∫–≤–µ",
    "address": "—É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 1",
    "city": "–ú–æ—Å–∫–≤–∞",
    "country": "–†–æ—Å—Å–∏—è",
    "description": "–ú–æ—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞",
    "books_count": 10,
    "created_at": "2025-11-03T12:00:00Z",
    "updated_at": "2025-11-03T12:00:00Z"
  }
]
```

### –°–æ–∑–¥–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
```
POST /api/libraries/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**Body:**
```json
{
  "name": "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≤ –ú–æ—Å–∫–≤–µ",
  "address": "—É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 1",
  "city": "–ú–æ—Å–∫–≤–∞",
  "country": "–†–æ—Å—Å–∏—è",
  "description": "–ú–æ—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞"
}
```
**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** `owner` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

### –°–≤–æ–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
```
GET /api/libraries/my-libraries/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –î–µ—Ç–∞–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
```
GET /api/libraries/{id}/
PUT /api/libraries/{id}/
PATCH /api/libraries/{id}/
DELETE /api/libraries/{id}/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å

### –ö–Ω–∏–≥–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
```
GET /api/libraries/{id}/books/
```

---

## 13. Hashtags (–•—ç—à—Ç–µ–≥–∏)

### –°–ø–∏—Å–æ–∫ —Ö—ç—à—Ç–µ–≥–æ–≤
```
GET /api/hashtags/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- `creator` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–æ–∑–¥–∞—Ç–µ–ª—é (ID –∏–ª–∏ username)

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
[
  {
    "id": 1,
    "name": "—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞",
    "slug": "fantastika",
    "creator": 1,
    "creator_username": "admin",
    "books_count": 150,
    "created_at": "2025-11-03T10:00:00Z"
  }
]
```

### –•—ç—à—Ç–µ–≥–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Å —á–∞—Å—Ç–æ—Ç–æ–π)
```
GET /api/hashtags/by_category/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `category_id` - ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ö—ç—à—Ç–µ–≥–∏ –≤—Å–µ—Ö –∫–Ω–∏–≥)
- `libraries` - —Å–ø–∏—Å–æ–∫ ID –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑: `?libraries=1&libraries=2`)
  - **–í–ê–ñ–ù–û:** –ï—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ —Ö—ç—à—Ç–µ–≥–æ–≤
  - –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ö—ç—à—Ç–µ–≥–∏ –∏–∑ –∫–Ω–∏–≥ —ç—Ç–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
  - `count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–∏–≥ —Å —ç—Ç–∏–º —Ö—ç—à—Ç–µ–≥–æ–º –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö (–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞)

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
{
  "hashtags": [
    {
      "id": 1,
      "name": "—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞",
      "slug": "fantastika",
      "count": 25
    },
    {
      "id": 2,
      "name": "–¥–µ—Ç–µ–∫—Ç–∏–≤",
      "slug": "detektiv",
      "count": 15
    }
  ],
  "max_count": 25,
  "min_count": 1
}
```
**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ö—ç—à—Ç–µ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å —É –∫–Ω–∏–≥ –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö (–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞)
- –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –≤–∫–ª—é—á–∞–µ—Ç —Ö—ç—à—Ç–µ–≥–∏ –∏–∑ –≤—Å–µ—Ö –µ—ë –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–∏–≥ —Å —ç—Ç–∏–º —Ö—ç—à—Ç–µ–≥–æ–º –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö
- –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —É–±—ã–≤–∞–Ω–∏—é —á–∞—Å—Ç–æ—Ç—ã (—Å–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –ø–µ—Ä–≤—ã–º–∏)
- **–ï—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫** (–Ω–µ –≤—Å–µ —Ö—ç—à—Ç–µ–≥–∏)

**–ü—Ä–∏–º–µ—Ä—ã:**
```
GET /api/hashtags/by_category/?libraries=1&libraries=2
GET /api/hashtags/by_category/?category_id=5&libraries=1
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ö—ç—à—Ç–µ–≥–∞
```
POST /api/hashtags/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**Body:**
```json
{
  "name": "—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"
}
```
**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** `creator` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, `slug` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ `name`

### –î–µ—Ç–∞–ª–∏ —Ö—ç—à—Ç–µ–≥–∞
```
GET /api/hashtags/{slug}/
```

---

## 14. Book Reviews (–û—Ç–∑—ã–≤—ã –Ω–∞ –∫–Ω–∏–≥–∏)

### –°–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤
```
GET /api/book-reviews/
```
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `book` - ID –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
- `user` - ID –∏–ª–∏ username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
[
  {
    "id": 1,
    "book": 1,
    "book_title": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏",
    "user": 1,
    "user_username": "user",
    "rating": 5,
    "review_text": "–û—Ç–ª–∏—á–Ω–∞—è –∫–Ω–∏–≥–∞!",
    "created_at": "2025-11-03T12:00:00Z",
    "updated_at": "2025-11-03T12:00:00Z"
  }
]
```

### –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
```
POST /api/book-reviews/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**Body:**
```json
{
  "book": 1,
  "rating": 5,
  "review_text": "–û—Ç–ª–∏—á–Ω–∞—è –∫–Ω–∏–≥–∞!"
}
```
**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** 
- `user` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ï—Å–ª–∏ –æ—Ç–∑—ã–≤ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è —ç—Ç–æ–π –∫–Ω–∏–≥–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (upsert)

### –î–µ—Ç–∞–ª–∏ –æ—Ç–∑—ã–≤–∞
```
GET /api/book-reviews/{id}/
PUT /api/book-reviews/{id}/
PATCH /api/book-reviews/{id}/
DELETE /api/book-reviews/{id}/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å

---

## 15. Books (–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ endpoints)

### –°–≤–æ–∏ –∫–Ω–∏–≥–∏
```
GET /api/books/my-books/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–û—Ç–≤–µ—Ç:** –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏
```
GET /api/books/my-books/read/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ö–Ω–∏–≥–∏ "–ë—É–¥—É —á–∏—Ç–∞—Ç—å"
```
GET /api/books/my-books/want-to-read/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ü–µ—Ä–µ–¥–∞—á–∞ –∫–Ω–∏–≥–∏
```
POST /api/books/{id}/transfer/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü

**Body (–ø–µ—Ä–µ–¥–∞—á–∞ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É):**
```json
{
  "library": 1
}
```

**Body (–ø–µ—Ä–µ–¥–∞—á–∞ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é):**
```json
{
  "user": 2
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `owner` –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º, –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `library`. –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –º–µ–Ω—è–µ—Ç—Å—è `owner`.

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ö—ç—à—Ç–µ–≥–æ–≤
```
POST /api/books/{id}/hashtags/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü

**Body:**
```json
{
  "hashtag_names": ["#—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞", "#–ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è"]
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** 
- –•—ç—à—Ç–µ–≥–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
- –ú–∞–∫—Å–∏–º—É–º 20 —Ö—ç—à—Ç–µ–≥–æ–≤ –Ω–∞ –∫–Ω–∏–≥—É
- –•—ç—à—Ç–µ–≥–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫–∞–∫ —Å–æ–∑–¥–∞—Ç–µ–ª—é

### –û—Ç–∑—ã–≤—ã –ø–æ –∫–Ω–∏–≥–µ
```
GET /api/books/{id}/
```
–í –¥–µ—Ç–∞–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ –∫–Ω–∏–≥–∏ (`BookDetailSerializer`) –≤–∫–ª—é—á–µ–Ω–æ –ø–æ–ª–µ `reviews` —Å–æ –≤—Å–µ–º–∏ –æ—Ç–∑—ã–≤–∞–º–∏ –∏ `average_rating` (—Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥).

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è –∫–Ω–∏–≥ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `read` –∏ `want_to_reread` –≤ –æ—Ç–≤–µ—Ç–µ —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–µ–Ω–æ –ø–æ–ª–µ `reading_dates` —Å–æ –≤—Å–µ–º–∏ –¥–∞—Ç–∞–º–∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è. –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–∞—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–æ—á—Ç–µ–Ω–∏—è (—Å–∞–º–∞—è —Ä–∞–Ω–Ω—è—è) —Ä—è–¥–æ–º —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞—Ç–∞–º–∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è
```
GET /api/books/{id}/reading_dates/        # –°–ø–∏—Å–æ–∫ –¥–∞—Ç –ø—Ä–æ—á—Ç–µ–Ω–∏—è
POST /api/books/{id}/reading_dates/       # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—ã –ø—Ä–æ—á—Ç–µ–Ω–∏—è
DELETE /api/books/{id}/reading_dates/{date_id}/  # –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞—Ç—ã –ø—Ä–æ—á—Ç–µ–Ω–∏—è
```

**POST Body (JSON):**
```json
{
  "date": "2024-01-15",
  "notes": "–ü—Ä–æ—á–∏—Ç–∞–ª –∑–∞ –æ–¥–∏–Ω –≤–µ—á–µ—Ä"
}
```

**–û—Ç–≤–µ—Ç (POST):** `201 Created`
```json
{
  "id": 1,
  "book": 1,
  "date": "2024-01-15",
  "notes": "–ü—Ä–æ—á–∏—Ç–∞–ª –∑–∞ –æ–¥–∏–Ω –≤–µ—á–µ—Ä",
  "created_at": "2024-01-15T12:00:00Z",
  "updated_at": "2024-01-15T12:00:00Z"
}
```

**–û—Ç–≤–µ—Ç (DELETE):** `204 No Content`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** 
- –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–Ω–∏–≥ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `read` –∏–ª–∏ `want_to_reread`
- –î–∞—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYY-MM-DD`
- –û–¥–Ω–∞ –¥–∞—Ç–∞ –ø—Ä–æ—á—Ç–µ–Ω–∏—è –Ω–∞ –∫–Ω–∏–≥—É (unique constraint –Ω–∞ `book` –∏ `date`)

**–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–Ω–∏–≥:**
- `owner` - ID –∏–ª–∏ username –≤–ª–∞–¥–µ–ª—å—Ü–∞
- `library` - ID –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–æ–¥–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
- `libraries` - —Å–ø–∏—Å–æ–∫ ID –±–∏–±–ª–∏–æ—Ç–µ–∫ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∏–±–ª–∏–æ—Ç–µ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä: `?libraries=1&libraries=2`)
- `status` - —Å—Ç–∞—Ç—É—Å –∫–Ω–∏–≥–∏ (`read`, `want_to_read`, `want_to_reread`, `none`)
- `hashtag` - –ø–æ–∏—Å–∫ –ø–æ —Ö—ç—à—Ç–µ–≥—É

**–ü—Ä–∏–º–µ—Ä—ã:**
```
GET /api/books/?owner=1
GET /api/books/?library=1
GET /api/books/?libraries=1&libraries=2  # –ö–Ω–∏–≥–∏ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
GET /api/books/?status=read
GET /api/books/?hashtag=—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–∞—Ä–∞–º–µ—Ç—Ä `libraries` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∫–Ω–∏–≥–∏ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∏–±–ª–∏–æ—Ç–µ–∫, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫–Ω–∏–≥–∏ –∏–∑ –≤—Å–µ—Ö —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.

### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü (–¥–ª—è –º–∞—Å—Ç–µ—Ä–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–∏–≥–∏)
```
POST /api/books/normalize-pages/
```
**–¢—Ä–µ–±—É–µ—Ç:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**Content-Type:** `multipart/form-data`

**Body:**
- `files`: List[File] - –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü

**–û—Ç–≤–µ—Ç:** `200 OK`
```json
{
  "normalized_images": [
    {
      "id": "uuid",
      "original_filename": "page1.jpg",
      "normalized_url": "/media/temp/normalized/normalized_uuid.jpg",
      "width": 1920,
      "height": 2560,
      "error": null
    },
    ...
  ],
  "total": 5,
  "processed": 5,
  "failed": 0,
  "errors": null
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenCV –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (Canny, Sobel, Laplacian, –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –±–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏—è)
- –î–ª—è –±–µ–ª—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –±–µ–ª–æ–º —Ñ–æ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback (–≥—Ä–∞–Ω–∏—Ü—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –æ—Ç—Å—Ç—É–ø–æ–º)
- –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `media/temp/normalized/`
- –ï—Å–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å, –≤ –ø–æ–ª–µ `error` –±—É–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –ü–æ–ª—è `width` –∏ `height` —Å–æ–¥–µ—Ä–∂–∞—Ç —Ä–∞–∑–º–µ—Ä—ã –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-06
