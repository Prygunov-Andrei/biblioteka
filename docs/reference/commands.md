# üõ† Management Commands

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### sync_categories

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ JSON —Ñ–∞–π–ª–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python manage.py sync_categories
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ `books/data/categories_canonical.json` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ (–ø–æ –∫–æ–¥—É)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏—é (parent_category) –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—è `parent` –≤ JSON
- –í—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: —Å–∫–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–Ω–æ, —Å–∫–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ

**–§–æ—Ä–º–∞—Ç –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ JSON —Ñ–∞–π–ª–∞:**
```json
{
  "categories": [
    {
      "code": "aziya",
      "name": "–ê–∑–∏—è",
      "slug": "aziya",
      "icon": "üìö",
      "order": 1,
      "parent": null
    },
    {
      "code": "tind",
      "name": "–ò–Ω–¥–∏—è, –ü–∞–∫–∏—Å—Ç–∞–Ω, –¢–∏–±–µ—Ç, –¶–µ–π–ª–æ–Ω (–®—Ä–∏-–õ–∞–Ω–∫–∞)",
      "slug": "indiya-pakistan-tibet",
      "icon": "üìö",
      "order": 6,
      "parent": "aziya"
    }
  ]
}
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìñ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 228 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ JSON
‚úÖ –°–æ–∑–¥–∞–Ω–∞: aziya - –ê–∑–∏—è
üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∞: tind - –ò–Ω–¥–∏—è, –ü–∞–∫–∏—Å—Ç–∞–Ω, –¢–∏–±–µ—Ç, –¶–µ–π–ª–æ–Ω (–®—Ä–∏-–õ–∞–Ω–∫–∞)
...
üîó –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å–≤—è–∑–µ–π parent_category: 113
üìä –ò—Ç–æ–≥–æ: —Å–æ–∑–¥–∞–Ω–æ 19, –æ–±–Ω–æ–≤–ª–µ–Ω–æ 209 –∫–∞—Ç–µ–≥–æ—Ä–∏–π
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--file` - –£–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–π JSON —Ñ–∞–π–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `categories_canonical.json`)

---

## –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Django –∫–æ–º–∞–Ω–¥—ã

### makemigrations
–°–æ–∑–¥–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–¥–µ–ª–µ–π.

```bash
python manage.py makemigrations books
```

### migrate
–ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏.

```bash
python manage.py migrate
```

### createsuperuser
–°–æ–∑–¥–∞–µ—Ç —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞–¥–º–∏–Ω–∫–∏.

```bash
python manage.py createsuperuser
```

### shell
–û—Ç–∫—Ä—ã–≤–∞–µ—Ç Django shell –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

```bash
python manage.py shell
```


### delete_all_books

–£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∫–Ω–∏–≥–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Å–æ—Ö—Ä–∞–Ω—è—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞–≤—Ç–æ—Ä–æ–≤ –∏ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
python manage.py delete_all_books --confirm
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∫–Ω–∏–≥–∏ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ—Ç–∑—ã–≤—ã)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞–≤—Ç–æ—Ä–æ–≤ –∏ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- –ü–æ–ª–µ–∑–Ω–æ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

### generate_test_books

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–Ω–∏–≥–∏ –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3 –∫–Ω–∏–≥–∏ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python manage.py generate_test_books

# –£–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–∏–≥ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
python manage.py generate_test_books --count-per-category 10

# –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–Ω–∏–≥–∏ –º–µ–∂–¥—É –Ω–∏–º–∏
python manage.py generate_test_books --create-users 4 --libraries-per-user 2 --distribute-books

# –£–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
python manage.py generate_test_books --user-id 1 --library-id 2
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–Ω–∏–≥–∏ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏
- –î–æ–±–∞–≤–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ö—ç—à—Ç–µ–≥–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ—Ö –∞–≤—Ç–æ—Ä–æ–≤ –∏ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏–∑ JSON —Ñ–∞–π–ª–æ–≤
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `--create-users` –∏ `--libraries-per-user` —Å–æ–∑–¥–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `--distribute-books` —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–Ω–∏–≥–∏ –º–µ–∂–¥—É –≤—Å–µ–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏
- –•—ç—à—Ç–µ–≥–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ 50% –∫–Ω–∏–≥ (–æ—Ç 1 –¥–æ 20 —Ö—ç—à—Ç–µ–≥–æ–≤ –Ω–∞ –∫–Ω–∏–≥—É)
- –û—Ç–∑—ã–≤—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–∏ (5-20 –æ—Ç–∑—ã–≤–æ–≤ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- –î–∞—Ç—ã –ø—Ä–æ—á—Ç–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∫–Ω–∏–≥ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `read` –∏ `want_to_reread` (–æ—Ç 1 –¥–æ 5 –¥–∞—Ç –ø—Ä–æ—á—Ç–µ–Ω–∏—è)
- –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–ª—è 60% –∫–Ω–∏–≥ (–æ—Ç 1 –¥–æ 9 —Ñ–æ—Ä–º–∞—Ç–æ–≤ –Ω–∞ –∫–Ω–∏–≥—É)
- –°—Ç—Ä–∞–Ω–∏—Ü—ã –∫–Ω–∏–≥ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–∏ (–æ—Ç 1 –¥–æ 5 —Å—Ç—Ä–∞–Ω–∏—Ü)

---

### runserver
–ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

```bash
python manage.py runserver
```

### collectstatic
–°–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã.

```bash
python collectstatic
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-27

