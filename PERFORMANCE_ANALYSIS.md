# üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ "–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"

## üîç –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

### –ü—Ä–æ–±–ª–µ–º—ã:
1. **3606 SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏** 684 –∫–Ω–∏–≥ ‚ùå
2. **–û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫:** `HashtagSerializer` —Å `source='creator.username'` –≤—ã–∑—ã–≤–∞–ª N+1 –∑–∞–ø—Ä–æ—Å—ã
3. **–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:** 3.1 MB JSON –¥–ª—è 684 –∫–Ω–∏–≥ (4.56 KB –Ω–∞ –∫–Ω–∏–≥—É)
4. **–í—Ä–µ–º—è:** ~1.3 —Å–µ–∫—É–Ω–¥—ã –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ ~3-5 —Å–µ–∫—É–Ω–¥

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ N+1 (–†–ï–ê–õ–ò–ó–û–í–ê–ù–û)
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `Prefetch('hashtags', queryset=Hashtag.objects.select_related('creator'))` 
2. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω `HashtagSerializer.creator_username` –Ω–∞ `SerializerMethodField`
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 3606 SQL –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí **0 SQL –∑–∞–ø—Ä–æ—Å–æ–≤** –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ‚úÖ

### –≠—Ç–∞–ø 2: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ (–†–ï–ê–õ–ò–ó–û–í–ê–ù–û)
1. ‚úÖ –°–æ–∑–¥–∞–Ω `BookListSerializer` —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏
2. ‚úÖ –£–±—Ä–∞–Ω—ã –ø–æ–ª—è: `description`, `binding_details`, `condition_details`
3. ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –∞–≤—Ç–æ—Ä–æ–≤ –∏ —Ö—ç—à—Ç–µ–≥–æ–≤
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
   - –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö: **3.1 MB ‚Üí 1.5 MB** (50% —É–º–µ–Ω—å—à–µ–Ω–∏–µ) ‚úÖ
   - –í—Ä–µ–º—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏: **1.3 —Å–µ–∫ ‚Üí 0.05 —Å–µ–∫** (96% —É—Å–∫–æ—Ä–µ–Ω–∏–µ) ‚úÖ

---

## üìä –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)

### –õ–æ–∫–∞–ª—å–Ω–æ:
- **SQL –∑–∞–ø—Ä–æ—Å—ã:** 0 –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ‚úÖ
- **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î:** 0.167 —Å–µ–∫
- **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è:** 0.052 —Å–µ–∫  
- **JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è:** 0.008 —Å–µ–∫
- **–í–°–ï–ì–û:** **0.227 —Å–µ–∫** (227 –º—Å) ‚úÖ
- **–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:** 1.5 MB (–≤–º–µ—Å—Ç–æ 3.1 MB)
- **–°–∫–æ—Ä–æ—Å—Ç—å:** 3018 –∫–Ω–∏–≥/—Å–µ–∫

### –ù–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–æ—Ü–µ–Ω–∫–∞):
- **–õ–æ–∫–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:** 0.227 —Å–µ–∫
- **–°–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:** ~0.1 —Å–µ–∫
- **–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö (1.5 MB –ø—Ä–∏ 10 MB/s):** ~0.15 —Å–µ–∫
- **–í–°–ï–ì–û:** **~0.48 —Å–µ–∫ (480 –º—Å)** ‚úÖ

**‚úÖ –û—Ç–ª–∏—á–Ω–æ! –ë—ã—Å—Ç—Ä–µ–µ 1 —Å–µ–∫—É–Ω–¥—ã –¥–∞–∂–µ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ**

---

## üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –µ—â–µ –±–æ–ª—å—à–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)

### –†–µ—à–µ–Ω–∏–µ 3: –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å lazy loading (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 30 –º–∏–Ω—É—Ç  
**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ 0.05-0.1 —Å–µ–∫

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 50-100 –∫–Ω–∏–≥ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –ü–æ–¥–≥—Ä—É–∂–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ (infinite scroll)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Virtual –∏–ª–∏ react-window –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞

**–ü–ª—é—Å—ã:**
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–ú–∏–Ω—É—Å—ã:**
- –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- –¢—Ä–µ–±—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞

---

### –†–µ—à–µ–Ω–∏–µ 4: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è  
**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 1-2 —á–∞—Å–∞  
**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –∏–ª–∏ Memcached
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–ø–∏—Å–∫–∞ –∫–Ω–∏–≥ –Ω–∞ 5-10 –º–∏–Ω—É—Ç
- –ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–Ω–∏–≥

**–ü–ª—é—Å—ã:**
- –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –°–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ë–î

**–ú–∏–Ω—É—Å—ã:**
- –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ù—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∫—ç—à–∞

---

### –†–µ—à–µ–Ω–∏–µ 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ –ë–î
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 30 –º–∏–Ω—É—Ç  
**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ 20-30%

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã
- –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ `(library_id, category_id, created_at)`
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–∞ `created_at` –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

**–ü–ª—é—Å—ã:**
- –£—Å–∫–æ—Ä—è–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î

**–ú–∏–Ω—É—Å—ã:**
- –¢—Ä–µ–±—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- –ù—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

---

### –†–µ—à–µ–Ω–∏–µ 6: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è  
**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 5 –º–∏–Ω—É—Ç  
**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `page_size = 200` (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `page_size = 100` –¥–ª—è –µ—â–µ –±–æ–ª—å—à–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- –ó–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–ü–ª—é—Å—ã:**
- –ë—ã—Å—Ç—Ä–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å
- –ú–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å

**–ú–∏–Ω—É—Å—ã:**
- –ë–æ–ª—å—à–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ç–µ–∫—É—â–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏ (684 –∫–Ω–∏–≥–∏):
‚úÖ **–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞** - –∑–∞–≥—Ä—É–∑–∫–∞ ~0.5 —Å–µ–∫ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### –ï—Å–ª–∏ –∫–Ω–∏–≥ —Å—Ç–∞–Ω–µ—Ç –±–æ–ª—å—à–µ (1000+):
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **–†–µ—à–µ–Ω–∏–µ 3** (lazy loading)
2. –î–æ–±–∞–≤–∏—Ç—å **–†–µ—à–µ–Ω–∏–µ 4** (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å **–†–µ—à–µ–Ω–∏–µ 5** (–∏–Ω–¥–µ–∫—Å—ã)

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `BookListSerializer` (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
2. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–†–µ—à–µ–Ω–∏–µ 4)
3. ‚ö†Ô∏è –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã (–†–µ—à–µ–Ω–∏–µ 5)
4. ‚ö†Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –¥–æ –∏ –ø–æ—Å–ª–µ

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|---------------|-------------------|-----------|
| SQL –∑–∞–ø—Ä–æ—Å—ã | 3606 | 0 | **100%** ‚úÖ |
| –í—Ä–µ–º—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ | 1.3 —Å–µ–∫ | 0.05 —Å–µ–∫ | **96%** ‚úÖ |
| –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö | 3.1 MB | 1.5 MB | **50%** ‚úÖ |
| –û–±—â–µ–µ –≤—Ä–µ–º—è (–ª–æ–∫–∞–ª—å–Ω–æ) | 1.4 —Å–µ–∫ | 0.23 —Å–µ–∫ | **84%** ‚úÖ |
| –û–±—â–µ–µ –≤—Ä–µ–º—è (—É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä) | ~3-5 —Å–µ–∫ | ~0.5 —Å–µ–∫ | **83-90%** ‚úÖ |

---

## ‚úÖ –ò—Ç–æ–≥

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:**
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫—É 684 –∫–Ω–∏–≥ –∑–∞ **~0.5 —Å–µ–∫—É–Ω–¥—ã** –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ N+1 –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –¥–ª—è —Ä–æ—Å—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–Ω–∏–≥

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.**
