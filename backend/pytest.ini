[pytest]
# Pytest конфигурация для проекта Biblioteka

# Django настройки
DJANGO_SETTINGS_MODULE = tests.settings
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Пути поиска тестов
testpaths = tests

# Маркеры для группировки тестов
markers =
    unit: Unit тесты (изолированные компоненты)
    api: API тесты (HTTP endpoints)
    integration: Интеграционные тесты (полные сценарии)
    slow: Долгие тесты (требуют больше времени)
    requires_db: Тесты требующие доступ к БД

# Плагины
addopts =
    --strict-markers
    --tb=short
    --disable-warnings
    --verbose
    --nomigrations

# Игнорируемые директории
norecursedirs =
    .git
    .venv
    venv
    env
    node_modules
    __pycache__
    .pytest_cache
    htmlcov
    .coverage
    migrations
    media

# Настройки для pytest-django
[pytest-django]
# Использовать реальную БД вместо in-memory (для отладки можно отключить)
DJANGO_DB_KEEP = False

# Отключить создание миграций в тестах
DJANGO_MIGRATE = False

